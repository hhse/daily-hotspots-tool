# 每日热点事件整理工具 - 使用说明

## 🚀 快速开始

### 1. 启动应用

双击 `start.bat` 文件或在命令行中运行：

```bash
npm start
```

应用将在 http://localhost:3000 启动

### 2. 访问界面

打开浏览器访问 http://localhost:3000 即可看到主界面

## 📋 功能说明

### 主要功能

1. **自动获取热点数据**
   - 系统会定时自动获取热点数据（默认每小时）
   - 支持多个数据源（微博、百度、知乎等）
   - 数据自动分类和去重

2. **数据管理**
   - 查看所有热点事件
   - 按分类筛选数据
   - 搜索特定热点
   - 手动添加新热点
   - 删除不需要的热点

3. **界面功能**
   - 响应式设计，支持手机和电脑
   - 实时搜索，支持高亮显示
   - 分页加载，性能优化
   - 美观的卡片式布局

### 界面操作

#### 左侧边栏
- **分类筛选**: 点击不同分类按钮筛选数据
- **全部热点**: 显示所有热点数据
- **手动添加**: 点击按钮添加自定义热点

#### 主内容区
- **搜索框**: 输入关键词搜索热点
- **刷新按钮**: 手动刷新数据
- **热点卡片**: 点击查看详情
- **加载更多**: 查看更多历史数据

#### 热点详情
- 点击任意热点卡片查看详细信息
- 包含标题、内容、来源、时间等信息
- 可直接跳转到原文链接

## 🔧 配置说明

### 修改数据获取频率

编辑 `server.js` 文件中的定时任务配置：

```javascript
// 每小时获取一次数据
cron.schedule('0 * * * *', () => {
  console.log('开始获取热点数据...');
  fetchHotspots();
});
```

常用的cron表达式：
- `0 * * * *` - 每小时
- `0 */2 * * *` - 每2小时
- `0 0 * * *` - 每天0点
- `*/30 * * * *` - 每30分钟

### 添加新的数据源

1. 编辑 `api-extensions.js` 文件
2. 添加新的API获取函数
3. 在 `fetchAllHotspots` 函数中调用新函数
4. 重启服务器

示例：
```javascript
// 添加新的数据源
async function fetchNewSource() {
  // 实现数据获取逻辑
  return hotspots;
}

// 在fetchAllHotspots中添加
const promises = [
  fetchBaiduHotspots(),
  fetchZhihuHotspots(),
  fetchNewSource() // 添加新数据源
];
```

### 自定义分类

在 `public/index.html` 中修改分类选项：

```html
<select class="form-select" id="category">
  <option value="科技">科技</option>
  <option value="娱乐">娱乐</option>
  <option value="体育">体育</option>
  <option value="财经">财经</option>
  <option value="社会">社会</option>
  <option value="其他">其他</option>
  <option value="自定义分类">自定义分类</option> <!-- 添加新分类 -->
</select>
```

## 📊 数据格式

### 热点数据结构

```javascript
{
  id: 1,                    // 唯一标识
  title: "热点标题",         // 标题
  content: "热点内容",       // 详细内容
  category: "科技",         // 分类
  source: "微博",           // 数据来源
  url: "https://...",      // 原文链接
  publish_time: "2024-01-01 12:00:00", // 发布时间
  created_at: "2024-01-01 12:00:00",   // 创建时间
  updated_at: "2024-01-01 12:00:00"    // 更新时间
}
```

### 分类统计格式

```javascript
{
  name: "科技",    // 分类名称
  count: 25       // 该分类下的热点数量
}
```

## 🔍 搜索功能

### 搜索语法

- **关键词搜索**: 直接输入关键词
- **分类搜索**: 结合分类筛选使用
- **实时搜索**: 输入2个字符以上自动搜索
- **高亮显示**: 搜索结果会高亮显示

### 搜索技巧

1. 使用具体的关键词
2. 结合分类筛选缩小范围
3. 利用时间排序查看最新热点

## 🛠️ 故障排除

### 常见问题

#### 1. 服务器启动失败
**问题**: 端口3000被占用
**解决**: 
```bash
# 停止占用端口的进程
Stop-Process -Name "node" -Force
# 或修改端口号
```

#### 2. 数据获取失败
**问题**: API接口无法访问
**解决**: 
- 检查网络连接
- 确认API接口是否可用
- 查看控制台错误信息

#### 3. 数据库错误
**问题**: SQLite数据库文件损坏
**解决**: 
- 删除 `hotspots.db` 文件
- 重启服务器，系统会自动创建新数据库

#### 4. 界面显示异常
**问题**: 样式或功能异常
**解决**: 
- 清除浏览器缓存
- 检查浏览器兼容性
- 确认所有文件完整

### 日志查看

服务器运行时会输出以下日志：
- 启动信息
- 数据获取状态
- 错误信息
- API调用结果

## 📱 移动端使用

### 响应式设计

应用支持移动端访问，主要特性：
- 自适应屏幕尺寸
- 触摸友好的界面
- 优化的移动端布局
- 快速加载

### 移动端操作

- 点击热点卡片查看详情
- 滑动浏览热点列表
- 使用搜索框快速查找
- 点击分类按钮筛选数据

## 🔒 数据安全

### 数据备份

定期备份 `hotspots.db` 文件：
```bash
# 复制数据库文件
copy hotspots.db hotspots_backup.db
```

### 数据恢复

恢复数据：
```bash
# 替换数据库文件
copy hotspots_backup.db hotspots.db
```

## 📈 性能优化

### 优化建议

1. **定期清理数据**: 删除过期的热点数据
2. **调整获取频率**: 根据需求调整数据获取频率
3. **监控资源使用**: 关注CPU和内存使用情况
4. **优化查询**: 使用索引提高查询性能

### 监控指标

- 数据获取成功率
- 响应时间
- 数据库大小
- 内存使用情况

## 🆘 技术支持

### 获取帮助

1. 查看控制台错误信息
2. 检查网络连接
3. 确认配置正确
4. 重启应用

### 联系支持

如遇到问题，请提供以下信息：
- 错误信息截图
- 系统环境信息
- 操作步骤描述
- 期望结果

---

**版本**: v1.0.0  
**更新时间**: 2024年1月  
**技术支持**: 查看 README.md 获取更多信息 